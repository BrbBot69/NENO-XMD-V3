const axios = require('axios');
const { lite } = require('../lite');

const CHANNEL_JID = '120363401225837204@newsletter';
const CHANNEL_NAME = '·¥ç·¥Ä ü·¥†…™…¥ ·¥ã…™…¥…¢ ·¥õ·¥á·¥Ñ ú';

const animeGirlCommand = ['animegirl', 'animegirl1', 'animegirl2', 'animegirl3', 'animegirl4', 'animegirl5'];

animeGirlCommand.forEach(cmdName => {
    lite({
        pattern: cmdName,
        desc: "Fetch a random anime girl image.",
        category: "anime",
        react: "üëß",
        filename: __filename
    }, async (conn, mek, m, { from, reply }) => {
        try {
            const apiUrl = `https://api.waifu.pics/sfw/waifu`;
            const response = await axios.get(apiUrl);
            const data = response.data;

            const captionText = 'üë∏ *NENO XMD RANDOM ANIME GIRL IMAGES* üë∏\n\n\n *üß¨¬©NENO BY NIMESHKA*';

            await conn.sendMessage(from, {
                image: { url: data.url },
                caption: captionText,
                contextInfo: {
                    forwardingScore: 999,
                    isForwarded: true,
                    forwardedNewsletterMessageInfo: {
                        newsletterJid: CHANNEL_JID,
                        newsletterName: CHANNEL_NAME,
                        serverMessageId: 101
                    }
                }
            });

        } catch (e) {
            console.error(`Error fetching anime girl image for ${cmdName}:`, e);
            reply(`‚ùå Error fetching anime girl image: ${e.message}`);
        }
    });
});
